(this["webpackJsonpihearu-client"]=this["webpackJsonpihearu-client"]||[]).push([[0],{306:function(e,t,n){},313:function(e,t,n){},319:function(e,t){},320:function(e,t){},328:function(e,t){},338:function(e,t){},339:function(e,t){},340:function(e,t){},348:function(e,t){},354:function(e,t,n){"use strict";n.r(t);var a=n(11),c=n.n(a),r=n(61),s=n.n(r),i=(n(306),n(4)),o=n.n(i),u=n(12),l=n(5),d=n(120),h=(n(313),n(266)),f=n.n(h),j=n(388),p=n(389),b=n(293),O=n(390),x=n(291),m=n.n(x),g=n(387),v=n(392),y=n(386),k=n(384),w=n(385),C=n(383),S=n(393),H=n(18),F=n(166),L={settings:{treshold:85},sentence:[]},N=Object(F.b)({name:"settings",initialState:L.settings,reducers:{update:function(e,t){e.treshold=t.payload}}}),T=Object(F.b)({name:"sentence",initialState:L.sentence,reducers:{addWord:function(e,t){return[].concat(Object(H.a)(e.slice(-4)),[t.payload])}}}),A=(N.reducer,Object(F.a)({reducer:{settings:N.reducer,sentence:T.reducer}})),W=A.getState,B=A.dispatch,D=n(46);function I(e){return"".concat(e,"%")}function R(e){var t=e.open,n=e.handleClose,a=Object(d.c)((function(e){return e.settings})),c=Object(d.b)();return Object(D.jsx)("div",{children:Object(D.jsxs)(v.a,{fullWidth:!0,maxWidth:"sm",open:t,onClose:n,"aria-labelledby":"settings-dialog-title",children:[Object(D.jsx)(C.a,{id:"settings-dialog-title",children:"Settings"}),Object(D.jsx)(k.a,{children:Object(D.jsxs)(w.a,{children:[Object(D.jsx)(b.a,{id:"treshold-slider",gutterBottom:!0,children:"Accuracy treshold"}),Object(D.jsx)(S.a,{value:a.treshold,getAriaValueText:I,"aria-labelledby":"treshold-slider",valueLabelDisplay:"auto",step:5,marks:!0,min:50,max:99,onChange:function(e,t){return c(N.actions.update(t))}})]})}),Object(D.jsx)(y.a,{children:Object(D.jsx)(g.a,{autoFocus:!0,onClick:n,color:"primary",children:"Close"})})]})})}var z,E=n(290),J=n(289),M=n(225),P=[],U=[],V=[],q=[],G=[],K=new Array(63).fill(0),Q=function(e){return e.reduce((function(e,t){return e.concat([t.x,t.y,t.z])}),[])};function X(){return Y.apply(this,arguments)}function Y(){return(Y=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"model/model.json",e.next=3,M.a("model/model.json");case 3:z=e.sent;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Z(){return $.apply(this,arguments)}function $(){return($=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/model.csv");case 2:return t=e.sent,e.next=5,t.text();case 5:n=e.sent,P=n.split(",");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(u.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new J.Hands({locateFile:function(e){return"/hands/".concat(e)}})).setOptions({maxNumHands:2,minDetectionConfidence:.5,minTrackingConfidence:.5}),n.onResults(te),e.next=5,n.initialize();case 5:t&&new E.Camera(t,{onFrame:function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.send({image:t});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}).start();case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function te(e){if(function(e){if(e.multiHandLandmarks&&e.multiHandedness){for(var t=K,n=K,a=0;a<e.multiHandLandmarks.length;a++){var c="Right"===e.multiHandedness[a].label,r=e.multiHandLandmarks[a];c?n=Q(r):t=Q(r)}U=[].concat(Object(H.a)(t),Object(H.a)(n)),V.push(U)}}(e),2===V.length){var t=function(e){var t=M.b([e]),n=z.predict(t).dataSync(),a=Math.max.apply(Math,Object(H.a)(n)),c=Object(H.a)(n).indexOf(a);return a>=W().settings.treshold/100?(console.log(P[c],a),P[c]):null}(V),n=t!==G[G.length-1],a=q.length>4&&t===(c=q).sort((function(e,t){return c.filter((function(t){return t===e})).length-c.filter((function(e){return e===t})).length})).pop();t&&q.push(t),t&&n&&a&&(G.push(t),B(T.actions.addWord(t)),speechSynthesis.speak(new SpeechSynthesisUtterance(t)),q=[]),V=[]}var c}var ne=n(391);var ae=function(){var e=Object(a.useRef)(null),t=c.a.useState(!1),n=Object(l.a)(t,2),r=n[0],s=n[1],i=c.a.useState(!0),h=Object(l.a)(i,2),x=h[0],g=h[1],v=Object(d.c)((function(e){return e.settings})),y=Object(d.c)((function(e){return e.sentence}));return Object(a.useEffect)((function(){(function(){var t=Object(u.a)(o.a.mark((function t(){var n,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z();case 2:return t.next=4,X();case 4:if(!(null===(n=e.current)||void 0===n?void 0:n.video)){t.next=7;break}return t.next=7,_(null===(a=e.current)||void 0===a?void 0:a.video);case 7:g(!1);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]),Object(D.jsxs)("div",{className:"App",children:[Object(D.jsx)(j.a,{position:"static",children:Object(D.jsxs)(p.a,{className:"appbar-toolbar",children:[Object(D.jsx)(b.a,{variant:"h6",className:"appbar-toolbar--title",children:"IHearU"}),Object(D.jsx)(O.a,{edge:"end","aria-label":"settings","aria-haspopup":"true",color:"inherit",onClick:function(){s(!0)},children:Object(D.jsx)(m.a,{})})]})}),!x&&Object(D.jsxs)("div",{className:"stats",children:["Treshold: ",v.treshold,"%"]}),Object(D.jsx)(f.a,{ref:e,style:{display:x?"none":"block"}}),Object(D.jsx)(R,{open:r,handleClose:function(){s(!1)}}),x&&Object(D.jsxs)("div",{className:"loading-scrim",children:[Object(D.jsx)("h3",{children:"Loading detection models"}),Object(D.jsx)(ne.a,{})]}),Object(D.jsx)("h3",{children:y.map((function(e,t){return Object(D.jsxs)("span",{children:[e," "]},"".concat(e,"-").concat(t))}))})]})},ce=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,394)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(D.jsx)(d.a,{store:A,children:Object(D.jsx)(ae,{})}),document.getElementById("root")),ce()}},[[354,1,2]]]);
//# sourceMappingURL=main.da49f33f.chunk.js.map